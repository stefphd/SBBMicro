<!-- HTML header for doxygen 1.9.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SBB Micro: Hardware</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeParagraphLink.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="sbbmicro-icon.svg"/></td>
  <td id="projectalign">
   <div id="projectname">SBB Micro
   </div>
   <div id="projectbrief">Source code for the self-balancing-bike microcontroller unit (Teensy 4.1-based). üöÄÔ∏è</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_extra_hardware.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Hardware </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >The following figure shows the hardware scheme of the controller unit. The hardware is divided in two separated boxes:</p><ul>
<li>low-voltage (LV) box: contains the micro-controller unit (MCU) and the sensors</li>
<li>high-voltage (HV) box: contains (mainly) the motor drivers</li>
</ul>
<div class="image">
<object type="image/svg+xml" data="hw-scheme.svg" style="pointer-events: none;"></object>
<div class="caption">
Hardware scheme</div></div>
    <h1><a class="anchor" id="autotoc_md19"></a>
Low-voltage box</h1>
<p >The hardwares contained in the LV box are:</p><ul>
<li>Teensy 4.1 MCU, which deals with control loop execution, sensor reading, driver setting, relay enabling, and communincation with a remote controller. This also uses the internal voltage regulator to convert 5V to 3.3V.</li>
<li>IMU ISM330DHCX, which measures accelerations (in mg) and angular velocities (in mdeg/s)</li>
<li>Magnetometer (MAG) LIS3MDL, which measures the magnetic field in mG</li>
<li>Ultimate GPS from Adafruit</li>
<li>Teensy 4.0 MCU, which reads the rotary encoder for the bicycle speed measurement</li>
<li>Reveiver Archer M+, which communicates with the remote controller</li>
<li>Amplifier module MecoStrain 2038, which reads the full-bridge strain gauges for the rider's torque measurement</li>
</ul>
<p >The base voltage level, used for digital signals, is 3.3V. In addition, two other voltage levels are present; 5V (used to power the Teensy 4.1 micro-controller) and 12V (used for the rotary encoder and the amplifier module).</p>
<h1><a class="anchor" id="autotoc_md20"></a>
High-voltage box</h1>
<p >The HV box contains the following hardwares:</p><ul>
<li><a class="el" href="structSteer.html" title="Steering raw data.">Steer</a> motor driver</li>
<li>Brake motor driver A4988</li>
<li>2 voltage regulator which convert the 24V (nominal) to 5V and 12V necessary for the low-voltage box</li>
<li>The main relay of the system, which is controlled by the MCU and powers the 12V voltage regulator, the brake motor driver, and the steer motor driver. Note that the 5V voltage regulator is powered directly from the battery (and not from the relay)</li>
</ul>
<h1><a class="anchor" id="autotoc_md21"></a>
Connections</h1>
<p >The following table shows the connections between the components.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>Describe the hardware in details: pins used and type (pull-up/pull-down), buses used</dd></dl>
<h2><a class="anchor" id="autotoc_md22"></a>
LV schematics</h2>
<div class="image">
<object type="image/svg+xml" data="SBBMicro-LV-schematic.svg" style="pointer-events: none;"></object>
<div class="caption">
Low-voltage schematic</div></div>
    <h2><a class="anchor" id="autotoc_md23"></a>
HV schematics</h2>
<div class="image">
<object type="image/svg+xml" data="SBBMicro-HV-schematic.svg" style="pointer-events: none;"></object>
<div class="caption">
High-voltage schematic</div></div>
     </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
