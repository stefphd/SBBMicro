<!-- HTML header for doxygen 1.9.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SBB Micro: User functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeParagraphLink.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="sbbmicro-icon.svg"/></td>
  <td id="projectalign">
   <div id="projectname">SBB Micro
   </div>
   <div id="projectbrief">Source code for the self-balancing-bike microcontroller unit (Teensy 4.1-based). üöÄÔ∏è</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__userfun.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">User functions</div></div>
</div><!--header-->
<div class="contents">

<p>User-defined functions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gacc2107cfceecd2abf098064b3c406291"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#gacc2107cfceecd2abf098064b3c406291">tempmonGetTemp</a> (void)</td></tr>
<tr class="memdesc:gacc2107cfceecd2abf098064b3c406291"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the CPU temperature.  <a href="group__userfun.html#gacc2107cfceecd2abf098064b3c406291">More...</a><br /></td></tr>
<tr class="separator:gacc2107cfceecd2abf098064b3c406291"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga01f554db1c07c31f60f5167060279699"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#ga01f554db1c07c31f60f5167060279699">set_arm_clock</a> (uint32_t frequency)</td></tr>
<tr class="memdesc:ga01f554db1c07c31f60f5167060279699"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the CPU clock.  <a href="group__userfun.html#ga01f554db1c07c31f60f5167060279699">More...</a><br /></td></tr>
<tr class="separator:ga01f554db1c07c31f60f5167060279699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae8a720b1a7a4a44aee590fadc28466cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#gae8a720b1a7a4a44aee590fadc28466cd">start_IObus</a> (void)</td></tr>
<tr class="memdesc:gae8a720b1a7a4a44aee590fadc28466cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the IO buses.  <a href="group__userfun.html#gae8a720b1a7a4a44aee590fadc28466cd">More...</a><br /></td></tr>
<tr class="separator:gae8a720b1a7a4a44aee590fadc28466cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa66ec55cf92209baa360d04b1b83c93c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#gaa66ec55cf92209baa360d04b1b83c93c">set_IObus</a> (void)</td></tr>
<tr class="memdesc:gaa66ec55cf92209baa360d04b1b83c93c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the IO buses.  <a href="group__userfun.html#gaa66ec55cf92209baa360d04b1b83c93c">More...</a><br /></td></tr>
<tr class="separator:gaa66ec55cf92209baa360d04b1b83c93c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga49debdd770eb6926f7fc90e11311396b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#ga49debdd770eb6926f7fc90e11311396b">do_zeros</a> (void)</td></tr>
<tr class="memdesc:ga49debdd770eb6926f7fc90e11311396b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform the zero.  <a href="group__userfun.html#ga49debdd770eb6926f7fc90e11311396b">More...</a><br /></td></tr>
<tr class="separator:ga49debdd770eb6926f7fc90e11311396b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1e1b8795efa14dd2266841d7f382929"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#gad1e1b8795efa14dd2266841d7f382929">set_GPIO</a> (void)</td></tr>
<tr class="memdesc:gad1e1b8795efa14dd2266841d7f382929"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the GPIO.  <a href="group__userfun.html#gad1e1b8795efa14dd2266841d7f382929">More...</a><br /></td></tr>
<tr class="separator:gad1e1b8795efa14dd2266841d7f382929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa61d07250d641e83402b0942b92b4d03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#gaa61d07250d641e83402b0942b92b4d03">start_brake_stepper</a> (void)</td></tr>
<tr class="memdesc:gaa61d07250d641e83402b0942b92b4d03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the brake stepper motor.  <a href="group__userfun.html#gaa61d07250d641e83402b0942b92b4d03">More...</a><br /></td></tr>
<tr class="separator:gaa61d07250d641e83402b0942b92b4d03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaadef8420a246721121dfcb8e722d4a66"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#gaadef8420a246721121dfcb8e722d4a66">get_sensors</a> (void)</td></tr>
<tr class="memdesc:gaadef8420a246721121dfcb8e722d4a66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get sensor readings.  <a href="group__userfun.html#gaadef8420a246721121dfcb8e722d4a66">More...</a><br /></td></tr>
<tr class="separator:gaadef8420a246721121dfcb8e722d4a66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga510ab3a13d94d0c9438444bd2cee3e6b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#ga510ab3a13d94d0c9438444bd2cee3e6b">do_control</a> (void)</td></tr>
<tr class="memdesc:ga510ab3a13d94d0c9438444bd2cee3e6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the control loop.  <a href="group__userfun.html#ga510ab3a13d94d0c9438444bd2cee3e6b">More...</a><br /></td></tr>
<tr class="separator:ga510ab3a13d94d0c9438444bd2cee3e6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga33fd832a9e1a27bddb7d9837a2dcf2f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#ga33fd832a9e1a27bddb7d9837a2dcf2f1">check_error</a> (void)</td></tr>
<tr class="memdesc:ga33fd832a9e1a27bddb7d9837a2dcf2f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for errors.  <a href="group__userfun.html#ga33fd832a9e1a27bddb7d9837a2dcf2f1">More...</a><br /></td></tr>
<tr class="separator:ga33fd832a9e1a27bddb7d9837a2dcf2f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9fce5f1a468a2461e110abd5077540fc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#ga9fce5f1a468a2461e110abd5077540fc">check_sbus</a> (void)</td></tr>
<tr class="memdesc:ga9fce5f1a468a2461e110abd5077540fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for SBUS.  <a href="group__userfun.html#ga9fce5f1a468a2461e110abd5077540fc">More...</a><br /></td></tr>
<tr class="separator:ga9fce5f1a468a2461e110abd5077540fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1a08bc0bd2c8a9b6ef864ba625912ded"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#ga1a08bc0bd2c8a9b6ef864ba625912ded">set_driver</a> (void)</td></tr>
<tr class="memdesc:ga1a08bc0bd2c8a9b6ef864ba625912ded"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the drivers.  <a href="group__userfun.html#ga1a08bc0bd2c8a9b6ef864ba625912ded">More...</a><br /></td></tr>
<tr class="separator:ga1a08bc0bd2c8a9b6ef864ba625912ded"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5bc8a74efc36d9fc5cc2ab4e293e8755"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#ga5bc8a74efc36d9fc5cc2ab4e293e8755">turnoff_callback</a> (void)</td></tr>
<tr class="memdesc:ga5bc8a74efc36d9fc5cc2ab4e293e8755"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for tuning off.  <a href="group__userfun.html#ga5bc8a74efc36d9fc5cc2ab4e293e8755">More...</a><br /></td></tr>
<tr class="separator:ga5bc8a74efc36d9fc5cc2ab4e293e8755"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga92d3e727e44a8a2a3537ff898e9e67c0"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#ga92d3e727e44a8a2a3537ff898e9e67c0">check_voltage</a> (void)</td></tr>
<tr class="memdesc:ga92d3e727e44a8a2a3537ff898e9e67c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the battery voltage.  <a href="group__userfun.html#ga92d3e727e44a8a2a3537ff898e9e67c0">More...</a><br /></td></tr>
<tr class="separator:ga92d3e727e44a8a2a3537ff898e9e67c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32315808bd93c14f43ad88f6129f4f35"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#ga32315808bd93c14f43ad88f6129f4f35">getTime</a> ()</td></tr>
<tr class="memdesc:ga32315808bd93c14f43ad88f6129f4f35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get internal RTC time.  <a href="group__userfun.html#ga32315808bd93c14f43ad88f6129f4f35">More...</a><br /></td></tr>
<tr class="separator:ga32315808bd93c14f43ad88f6129f4f35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e4b427672ce591ebe186358951f47c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#ga5e4b427672ce591ebe186358951f47c2">do_led</a> ()</td></tr>
<tr class="memdesc:ga5e4b427672ce591ebe186358951f47c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Management of the status LED.  <a href="group__userfun.html#ga5e4b427672ce591ebe186358951f47c2">More...</a><br /></td></tr>
<tr class="separator:ga5e4b427672ce591ebe186358951f47c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga94547a891c369354cec16547930de449"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#ga94547a891c369354cec16547930de449">serial_flush</a> ()</td></tr>
<tr class="memdesc:ga94547a891c369354cec16547930de449"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush the UARTs.  <a href="group__userfun.html#ga94547a891c369354cec16547930de449">More...</a><br /></td></tr>
<tr class="separator:ga94547a891c369354cec16547930de449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab58a49c09d14894de25f92ff2bf33f78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__userfun.html#gab58a49c09d14894de25f92ff2bf33f78">set_ctrl_param</a> ()</td></tr>
<tr class="memdesc:gab58a49c09d14894de25f92ff2bf33f78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set custom control parameters.  <a href="group__userfun.html#gab58a49c09d14894de25f92ff2bf33f78">More...</a><br /></td></tr>
<tr class="separator:gab58a49c09d14894de25f92ff2bf33f78"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >User-defined functions. </p>
<p >Definition of the user defined functions called in <a class="el" href="group__mainfun.html#gae66f6b31b5ad750f1fe042a706a4e3d4" title="Entry-point function.">main()</a>. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__mainfun.html#gae66f6b31b5ad750f1fe042a706a4e3d4" title="Entry-point function.">main</a> <a class="el" href="userfun_8h.html" title="Definitions of user functions.">userfun.h</a> </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga33fd832a9e1a27bddb7d9837a2dcf2f1" name="ga33fd832a9e1a27bddb7d9837a2dcf2f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga33fd832a9e1a27bddb7d9837a2dcf2f1">&#9670;&nbsp;</a></span>check_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void check_error </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check for errors. </p>
<p >Function to check for possible errors, such as unfeasible values of signals or limit exceeding. A error state variable is modified if errors are found. </p>

</div>
</div>
<a id="ga9fce5f1a468a2461e110abd5077540fc" name="ga9fce5f1a468a2461e110abd5077540fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9fce5f1a468a2461e110abd5077540fc">&#9670;&nbsp;</a></span>check_sbus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool check_sbus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check for SBUS. </p>
<p >Function to check for unfeasible values of SBUS channels, which must be within <a class="el" href="group__constants.html#ga576da65404ec571af0c8ce3858421de3" title="Minimum value from SBUS.">MIN_SBUS</a> and <a class="el" href="group__constants.html#ga10adcf123bdcbb94941f0a7660d2ed9a" title="Maximum value from SBUS.">MAX_SBUS</a>. The function checks also for lost frame and fail safe. </p><dl class="section return"><dt>Returns</dt><dd>True if success, false for errors. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__constants.html#ga576da65404ec571af0c8ce3858421de3" title="Minimum value from SBUS.">MIN_SBUS</a> <a class="el" href="group__constants.html#ga10adcf123bdcbb94941f0a7660d2ed9a" title="Maximum value from SBUS.">MAX_SBUS</a> </dd></dl>

</div>
</div>
<a id="ga92d3e727e44a8a2a3537ff898e9e67c0" name="ga92d3e727e44a8a2a3537ff898e9e67c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga92d3e727e44a8a2a3537ff898e9e67c0">&#9670;&nbsp;</a></span>check_voltage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean check_voltage </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check the battery voltage. </p>
<p >Function to check possible under- or over-voltage of the battery. </p><dl class="section return"><dt>Returns</dt><dd>True if the battery voltage is between <a class="el" href="group__constants.html#ga34badbf9acae6cc5c2eed2ab51b32d30" title="Minimum battery voltage (undervoltage) (V).">MIN_VOLTAGE</a> and <a class="el" href="group__constants.html#ga0637861f9419cef73e2e7e6210280e4e" title="Maximum battery voltage (overvoltage) (V).">MAX_VOLTAGE</a> (no under- or over-voltage occured). </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__constants.html#ga34badbf9acae6cc5c2eed2ab51b32d30" title="Minimum battery voltage (undervoltage) (V).">MIN_VOLTAGE</a> <a class="el" href="group__constants.html#ga0637861f9419cef73e2e7e6210280e4e" title="Maximum battery voltage (overvoltage) (V).">MAX_VOLTAGE</a> </dd></dl>

</div>
</div>
<a id="ga510ab3a13d94d0c9438444bd2cee3e6b" name="ga510ab3a13d94d0c9438444bd2cee3e6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga510ab3a13d94d0c9438444bd2cee3e6b">&#9670;&nbsp;</a></span>do_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_control </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the control loop. </p>
<p >Function to convert sensor readings to convenient units and update the control loop with the new sensor readings. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__macros.html" title="Macro definitions.">Macros</a> </dd></dl>

</div>
</div>
<a id="ga5e4b427672ce591ebe186358951f47c2" name="ga5e4b427672ce591ebe186358951f47c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5e4b427672ce591ebe186358951f47c2">&#9670;&nbsp;</a></span>do_led()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_led </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Management of the status LED. </p>
<p >Function to manage the status LED according to the microcontroller mode. Depending on the LED blinking, the microcontroller mode is:</p><ul>
<li>Default mode without signal-logging: LEDmode is <a class="el" href="namespaceLedMode.html#a10e122ec322ab40e9743109b999d2d17" title="Default mode without signal-logging.">LedMode::DEF</a>, LED blinks depending on <a class="el" href="group__constants.html#gac75a3ec39d543ae303e8edef00c3dca1" title="Sampling factor of led in default mode (expressed in units of SAMPLING_TIME).">DEF_LED</a>.</li>
<li>Default mode with signal-logging: LEDmode is <a class="el" href="namespaceLedMode.html#a8d6f6d02626a516c46ee703722a7f956" title="Default mode with signal-logging.">LedMode::LOG</a>, LED blinks depending on <a class="el" href="group__constants.html#gaabdccb3d58b5328e2597d57a0bfcfa36" title="Sampling factor of led in log mode (expressed in units of SAMPLING_TIME).">LOG_LED</a>.</li>
<li>MTP mode: LEDmode is <a class="el" href="namespaceLedMode.html#a29705e031e56f6a3030dc158c68f8ab9" title="MTP mode.">LedMode::MTP</a>, LED blinks depending on <a class="el" href="group__constants.html#ga78e83fa846657dc71872e35d38cd431a" title="Sampling factor of led in mtp mode (expressed in units of SAMPLING_TIME).">MTP_LED</a>.</li>
<li>Error mode: LEDmode is <a class="el" href="namespaceLedMode.html#a35c7502591d8ac1ae2456b00a780a5f4" title="Error mode.">LedMode::ERR</a>, LED blinks depending on <a class="el" href="group__constants.html#ga29c80150517b1375edea1474971f4b39" title="Sampling factor of led in error mode (expressed in units of SAMPLING_TIME).">ERR_LED</a>. <dl class="section see"><dt>See also</dt><dd><a class="el" href="namespaceLedMode.html" title="Led mode constants.">LedMode</a> <a class="el" href="group__constants.html#gac75a3ec39d543ae303e8edef00c3dca1" title="Sampling factor of led in default mode (expressed in units of SAMPLING_TIME).">DEF_LED</a> <a class="el" href="group__constants.html#gaabdccb3d58b5328e2597d57a0bfcfa36" title="Sampling factor of led in log mode (expressed in units of SAMPLING_TIME).">LOG_LED</a> <a class="el" href="group__constants.html#ga78e83fa846657dc71872e35d38cd431a" title="Sampling factor of led in mtp mode (expressed in units of SAMPLING_TIME).">MTP_LED</a> <a class="el" href="group__constants.html#ga29c80150517b1375edea1474971f4b39" title="Sampling factor of led in error mode (expressed in units of SAMPLING_TIME).">ERR_LED</a> </dd></dl>
</li>
</ul>

</div>
</div>
<a id="ga49debdd770eb6926f7fc90e11311396b" name="ga49debdd770eb6926f7fc90e11311396b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga49debdd770eb6926f7fc90e11311396b">&#9670;&nbsp;</a></span>do_zeros()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_zeros </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform the zero. </p>
<p >Function to perform the zero-calibration of some sensors. These include the torsiometer, the actual motor current and the actual steer rate. It also sets the pre-defined offsets (e.g. for the gyrometer). </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="structRiderTorque.html#a7b45fe5bf3d719533608a4ea62849565" title="Rider torque offset (in Nm).">RiderTorque::riderTorque_offset</a> <a class="el" href="group__constants.html#ga02a250c43b1b4dd09d96b35ba5d788f1" title="Offset of gyro x.">GYROX_OFFSET</a> <a class="el" href="group__constants.html#ga7a088044bdaccb6910a1277718a4b895" title="Offset of gyro y.">GYROY_OFFSET</a> <a class="el" href="group__constants.html#ga2676a196647e348b0c882a47a0176868" title="Offset of gyro z.">GYROZ_OFFSET</a> </dd></dl>

</div>
</div>
<a id="gaadef8420a246721121dfcb8e722d4a66" name="gaadef8420a246721121dfcb8e722d4a66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaadef8420a246721121dfcb8e722d4a66">&#9670;&nbsp;</a></span>get_sensors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_sensors </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get sensor readings. </p>
<p >Function to get the sensor readings (raw values only). Sensors are read with the specified sampling factor. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__constants.html#gafe4be61d10dd9068bae19c0b74dac665" title="Sampling time of the control loop (us).">SAMPLING_TIME</a> <a class="el" href="group__constants.html#gacbe0dceee8d11058fe047d4738fb845e" title="Sampling factor of speed sensor (expressed in units of SAMPLING_TIME).">SPEED_SAMPLING_FAC</a> <a class="el" href="group__constants.html#ga3b0911f48b2f93535655fc0eb773ea9d" title="Sampling factor of IMU (expressed in units of SAMPLING_TIME).">IMU_SAMPLING_FAC</a> <a class="el" href="group__constants.html#gaf19c6364be453c53d924c78bdb8e8262" title="Sampling factor of magnetometer (expressed in units of SAMPLING_TIME).">MAG_SAMPLING_FAC</a> </dd></dl>

</div>
</div>
<a id="ga32315808bd93c14f43ad88f6129f4f35" name="ga32315808bd93c14f43ad88f6129f4f35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga32315808bd93c14f43ad88f6129f4f35">&#9670;&nbsp;</a></span>getTime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t getTime </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get internal RTC time. </p>
<p >Function to get the internal RTC time of the microcontroller. </p><dl class="section return"><dt>Returns</dt><dd>The internal RTC time, as a time_t type, which are the seconds elapsed from 1970 1 Jan 00:00:00. </dd></dl>

</div>
</div>
<a id="ga94547a891c369354cec16547930de449" name="ga94547a891c369354cec16547930de449"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga94547a891c369354cec16547930de449">&#9670;&nbsp;</a></span>serial_flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serial_flush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flush the UARTs. </p>
<p >Function to flush the receive buffer of the UARTs. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__bus.html#ga02867a687d1d1e1e993c7302e5b33da4" title="Used UART for speed sensor bus.">UART_SPEEDSENS</a> <a class="el" href="group__vars.html#gadeddc2c3e8e90c1b964324757f5ed704" title="GPS object.">UART_GPS</a> </dd></dl>

</div>
</div>
<a id="ga01f554db1c07c31f60f5167060279699" name="ga01f554db1c07c31f60f5167060279699"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga01f554db1c07c31f60f5167060279699">&#9670;&nbsp;</a></span>set_arm_clock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t set_arm_clock </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>frequency</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the CPU clock. </p>
<p >Extern function to set the CPU clock. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frequency</td><td>The CPU clock in Hz. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The actual CPU frequency in Hz. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://forum.pjrc.com/threads/57444-How-to-change-clock-speed-on-Teensy-4-0">https://forum.pjrc.com/threads/57444-How-to-change-clock-speed-on-Teensy-4-0</a> </dd></dl>

</div>
</div>
<a id="gab58a49c09d14894de25f92ff2bf33f78" name="gab58a49c09d14894de25f92ff2bf33f78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab58a49c09d14894de25f92ff2bf33f78">&#9670;&nbsp;</a></span>set_ctrl_param()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_ctrl_param </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set custom control parameters. </p>
<p >Function to set custom control parameters in controlParams, e.g. controlParams.propGainSpeed = 0. </p><dl class="section attention"><dt>Attention</dt><dd>Be sure that modified variables exist. </dd></dl>

</div>
</div>
<a id="ga1a08bc0bd2c8a9b6ef864ba625912ded" name="ga1a08bc0bd2c8a9b6ef864ba625912ded"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1a08bc0bd2c8a9b6ef864ba625912ded">&#9670;&nbsp;</a></span>set_driver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_driver </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the drivers. </p>
<p >Function to set the drivers, such as the steer-motor driver and the throttle via the DAC. Drivers are set only if no error is found. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__macros.html" title="Macro definitions.">Macros</a> </dd></dl>

</div>
</div>
<a id="gad1e1b8795efa14dd2266841d7f382929" name="gad1e1b8795efa14dd2266841d7f382929"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad1e1b8795efa14dd2266841d7f382929">&#9670;&nbsp;</a></span>set_GPIO()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_GPIO </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the GPIO. </p>
<p >Function to set general-purpose input-output digital pins, depending on their usage. This also includes the assignment of a default (initial) state for the digital output pins. </p>

</div>
</div>
<a id="gaa66ec55cf92209baa360d04b1b83c93c" name="gaa66ec55cf92209baa360d04b1b83c93c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa66ec55cf92209baa360d04b1b83c93c">&#9670;&nbsp;</a></span>set_IObus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_IObus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the IO buses. </p>
<p >Function to start the IO buses for the sensors and drivers after initialization. This incluses the setting of sensors (IMU, magnetometer, GPS, ADC, PWM and DAC). </p>

</div>
</div>
<a id="gaa61d07250d641e83402b0942b92b4d03" name="gaa61d07250d641e83402b0942b92b4d03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa61d07250d641e83402b0942b92b4d03">&#9670;&nbsp;</a></span>start_brake_stepper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void start_brake_stepper </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the brake stepper motor. </p>
<p >Function to start and set the stepper motor acting on the brake lever. </p>

</div>
</div>
<a id="gae8a720b1a7a4a44aee590fadc28466cd" name="gae8a720b1a7a4a44aee590fadc28466cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae8a720b1a7a4a44aee590fadc28466cd">&#9670;&nbsp;</a></span>start_IObus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void start_IObus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the IO buses. </p>
<p >Function to initialize the IO buses for the sensors and drivers. This incluses initialization of SPI and the related sensors (IMU, magnetometer, and DAC), initialization of the UARTs for the speed sensor and GPS. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__vars.html#ga7781908d71a6c9f74e24f1261df76e82" title="IMU object (accelerometer and gryometer).">USED_SPI</a> <a class="el" href="group__bus.html#ga02867a687d1d1e1e993c7302e5b33da4" title="Used UART for speed sensor bus.">UART_SPEEDSENS</a> <a class="el" href="group__vars.html#gadeddc2c3e8e90c1b964324757f5ed704" title="GPS object.">UART_GPS</a> </dd></dl>

</div>
</div>
<a id="gacc2107cfceecd2abf098064b3c406291" name="gacc2107cfceecd2abf098064b3c406291"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc2107cfceecd2abf098064b3c406291">&#9670;&nbsp;</a></span>tempmonGetTemp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float tempmonGetTemp </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the CPU temperature. </p>
<p >Extern function to get the CPU temperature in Celsius degrees. </p><dl class="section return"><dt>Returns</dt><dd>The CPU temperature in Celsius degrees. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://forum.pjrc.com/threads/59813-Teensy-4-0-Internal-Temperature-measurement">https://forum.pjrc.com/threads/59813-Teensy-4-0-Internal-Temperature-measurement</a> </dd></dl>

</div>
</div>
<a id="ga5bc8a74efc36d9fc5cc2ab4e293e8755" name="ga5bc8a74efc36d9fc5cc2ab4e293e8755"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5bc8a74efc36d9fc5cc2ab4e293e8755">&#9670;&nbsp;</a></span>turnoff_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void turnoff_callback </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback for tuning off. </p>
<p >Callback function called when the microcontroller turns of, in order to end stuff before (e.g. close the log file). </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
