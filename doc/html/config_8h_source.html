<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SBB Micro: include/config.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="sbbmicro-icon.png"/></td>
  <td id="projectalign">
   <div id="projectname">SBB Micro
   </div>
   <div id="projectbrief">Source code for the self-balancing-bike microcontroller unit (Teensy 4.1-based). üöÄÔ∏è</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('config_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">config.h</div></div>
</div><!--header-->
<div class="contents">
<a href="config_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span> </div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#ifndef __CONFIG_H__</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#define __CONFIG_H__</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span> </div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="comment">//....................................BUSES....................................</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="comment">//SPI</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno"><a class="line" href="group__bus.html#ga175e9f39223b6eedc734418340c87c13">   37</a></span><span class="preprocessor">#define USED_SPI        SPI1 </span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno"><a class="line" href="group__bus.html#ga5a1c5191e0768008bc1952bca226272e">   38</a></span><span class="preprocessor">#define SPISPEED_IMU    10e6 </span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno"><a class="line" href="group__bus.html#gabaf70520c44044e406b85a4f3a26509e">   39</a></span><span class="preprocessor">#define SPISPEED_MAG    10e6 </span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno"><a class="line" href="group__bus.html#ga7d343ef88fe32834cf09d9acd41a2b48">   40</a></span><span class="preprocessor">#define SPISPEED_DAC    10e6 </span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span> </div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="comment">//UART</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno"><a class="line" href="group__bus.html#ga02867a687d1d1e1e993c7302e5b33da4">   43</a></span><span class="preprocessor">#define UART_SPEEDSENS  Serial7 </span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno"><a class="line" href="group__bus.html#ga24e9c4844ac97005cfb355f9f894132c">   44</a></span><span class="preprocessor">#define BAUD_SPEEDSENS  4e6 </span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno"><a class="line" href="group__bus.html#ga5c879f0ea6a82691cde0c7bc6acb114c">   45</a></span><span class="preprocessor">#define UART_GPS        Serial2 </span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno"><a class="line" href="group__bus.html#gaabd9c6425be53d81ac771a5cb7906ba4">   46</a></span><span class="preprocessor">#define BAUD_GPS_DEF    9600 </span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno"><a class="line" href="group__bus.html#gad8cebcbdfefe7b55ff74616dbd258ad2">   47</a></span><span class="preprocessor">#define BAUD_GPS        57600 </span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="group__bus.html#gaacd0e9d1ca1bad59d205f7c12cd57616">   48</a></span><span class="preprocessor">#define GPS_EXTBUFSIZE  128 </span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="comment">//#define UART_SBUS     Serial8 //used UART for SBUS communication TODO sbus</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="comment">//ADC</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="group__bus.html#gab298faea909e0aa62203195aa3d6ca80">   52</a></span><span class="preprocessor">#define ADC_RES         12 </span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno"><a class="line" href="group__bus.html#ga9e49a67f99885d85d011f4968fb36e13">   53</a></span><span class="preprocessor">#define ADC_AVERAGE     8 </span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span> </div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="comment">//DAC</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno"><a class="line" href="group__bus.html#gab8856ead374d98f2adf805caecb5a670">   56</a></span><span class="preprocessor">#define DAC_RES         12 </span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno"><a class="line" href="group__bus.html#ga26010d31018661d8ea792e4bbf0c13bf">   57</a></span><span class="preprocessor">#define DAC_MTR_CH      0 </span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno"><a class="line" href="group__bus.html#ga686ae53fc76ad80b3d58c78368f402f1">   58</a></span><span class="preprocessor">#define DAC_THROTTLE_CH 1 </span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="comment">//PWM</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno"><a class="line" href="group__bus.html#ga4ff4dc1e0eb4081e51c557b1233c3e63">   61</a></span><span class="preprocessor">#define PWM_RES         12 </span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno"><a class="line" href="group__bus.html#ga76fe84d83b8d236bd4f0d20d7e2ed06f">   62</a></span><span class="preprocessor">#define PWM_FREQ        5e3 </span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno"><a class="line" href="group__bus.html#ga6a06d5e0af804c23442d316bd0b873d6">   63</a></span><span class="preprocessor">#define PWM_MIN         0.1F </span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="group__bus.html#ga391fa1e490bd712720989b58fa0d9904">   64</a></span><span class="preprocessor">#define PWM_MAX         0.9F </span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span> </div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="comment">//.....................................PINS....................................</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span> </div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="comment">//SPI CS PINS</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno"><a class="line" href="group__pin.html#ga88aa54aa214da6fe8a39d56cc05804b5">   80</a></span><span class="preprocessor">#define CS_IMU          0 </span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno"><a class="line" href="group__pin.html#gacbf9b6821e3a24a4dd9278411957191d">   81</a></span><span class="preprocessor">#define CS_MAG          2 </span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno"><a class="line" href="group__pin.html#ga2ddc36d42271305a713cba8e377a26cc">   82</a></span><span class="preprocessor">#define CS_DAC          3 </span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span> </div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="comment">//ANALOG PINS</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno"><a class="line" href="group__pin.html#gad33d8242119f64a4afd8e0525ffbaa17">   85</a></span><span class="preprocessor">#define STEER_POS       A16 </span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno"><a class="line" href="group__pin.html#ga5efa9432b982a6616f35abd1768f7e52">   86</a></span><span class="preprocessor">#define STEER_SPEED     A0 </span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno"><a class="line" href="group__pin.html#ga2b4b8f9fd72533da4240bc35a55204bd">   87</a></span><span class="preprocessor">#define ACT_CURR        A1 </span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno"><a class="line" href="group__pin.html#ga1972e102d147b0783e4ce14aaa8b2066">   88</a></span><span class="preprocessor">#define RIDER_TRQ       A17 </span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno"><a class="line" href="group__pin.html#ga95f77a4b46f8270143622e8f7de8faa7">   89</a></span><span class="preprocessor">#define VOLTAGE         A15 </span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno"><a class="line" href="group__pin.html#ga43b52247e3fe06a477e44548566b315d">   90</a></span><span class="preprocessor">#define FORK_DISP       A14 </span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="comment">//PWM</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno"><a class="line" href="group__pin.html#gaf5a48adc9d939102a42f2829b7a1b8ac">   93</a></span><span class="preprocessor">#define PWM_PIN         18 </span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span> </div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span><span class="comment">//DIGITAL OUT</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno"><a class="line" href="group__pin.html#gae06560422f3f0cc3c1943535ceee06d3">   96</a></span><span class="preprocessor">#define MTR_EN_PIN      16 </span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno"><a class="line" href="group__pin.html#ga7d4b45a38e113d8ba0f7e526ba7e442f">   97</a></span><span class="preprocessor">#define MTR_DIR_PIN     17 </span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno"><a class="line" href="group__pin.html#gaed8e55358b7a10a3843ed8402143fc28">   98</a></span><span class="preprocessor">#define RELAY_EN_PIN    33 </span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span><span class="comment">//DIGITAL IN </span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno"><a class="line" href="group__pin.html#ga38faa998a18ae4bad1c218c2fe1d766d">  101</a></span><span class="preprocessor">#define ONOFF_STATE_PIN 34 </span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span><span class="comment">//.............................CONSTANTS &amp; FACTORS.............................</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span> </div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span><span class="comment">//TIMES</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno"><a class="line" href="group__constants.html#gafe4be61d10dd9068bae19c0b74dac665">  117</a></span><span class="preprocessor">#define SAMPLING_TIME       1e3 </span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno"><a class="line" href="group__constants.html#gacbe0dceee8d11058fe047d4738fb845e">  118</a></span><span class="preprocessor">#define SPEED_SAMPLING_FAC  1 </span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno"><a class="line" href="group__constants.html#ga3b0911f48b2f93535655fc0eb773ea9d">  119</a></span><span class="preprocessor">#define IMU_SAMPLING_FAC    1 </span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno"><a class="line" href="group__constants.html#gaf19c6364be453c53d924c78bdb8e8262">  120</a></span><span class="preprocessor">#define MAG_SAMPLING_FAC    5 </span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno"><a class="line" href="group__constants.html#gac75a3ec39d543ae303e8edef00c3dca1">  121</a></span><span class="preprocessor">#define DEF_LED             1000 </span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno"><a class="line" href="group__constants.html#gaabdccb3d58b5328e2597d57a0bfcfa36">  122</a></span><span class="preprocessor">#define LOG_LED             500 </span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno"><a class="line" href="group__constants.html#ga78e83fa846657dc71872e35d38cd431a">  123</a></span><span class="preprocessor">#define MTP_LED             250 </span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno"><a class="line" href="group__constants.html#ga29c80150517b1375edea1474971f4b39">  124</a></span><span class="preprocessor">#define ERR_LED             10000 </span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span> </div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span><span class="comment">//OUTPUT DATA RATE</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno"><a class="line" href="group__constants.html#ga8f70d036e0fc3127bbd1ac81e241d110">  127</a></span><span class="preprocessor">#define ACC_ODR         3333 </span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno"><a class="line" href="group__constants.html#gac67c123471c94711fcae871ee5aa437c">  128</a></span><span class="preprocessor">#define GYRO_ODR        3333 </span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno"><a class="line" href="group__constants.html#gaa42914727c0f5c56229dc8eb631194c0">  129</a></span><span class="preprocessor">#define MAG_ODR         200 </span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span> </div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span><span class="comment">//GAINS &amp; CONVERSION</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno"><a class="line" href="group__constants.html#gaf0048c7001abe7c261bb3f45d64dd281">  132</a></span><span class="preprocessor">#define SPEED_SCALE     1.0e-3F </span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno"><a class="line" href="group__constants.html#ga7769876a0046c44037b4c76478f304de">  133</a></span><span class="preprocessor">#define DIST_SCALE      0.25F </span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno"><a class="line" href="group__constants.html#ga12c7b17bb03dc66dac226cdfe74f3c2d">  134</a></span><span class="preprocessor">#define ACC_SCALE       (1.0e-3F*9.806F) </span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno"><a class="line" href="group__constants.html#gabdeac7f9288bf09fd6e1739d22ff8bea">  135</a></span><span class="preprocessor">#define GYRO_SCALE      (1.0e-3F*PI/180.0F) </span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno"><a class="line" href="group__constants.html#gaf91ea782523c15cb13ede694b43d1510">  136</a></span><span class="preprocessor">#define MAG_SCALE       0.1F </span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno"><a class="line" href="group__constants.html#ga4fb1ec33138eb95a0c3b636332d2bda0">  137</a></span><span class="preprocessor">#define GPSSPEED_SCALE  0.5144F </span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno"><a class="line" href="group__constants.html#ga3869f903b90705dbed0a79037c981db7">  138</a></span><span class="preprocessor">#define GAIN_RIDERTRQ   0.141F </span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno"><a class="line" href="group__constants.html#gad79a71fb5e02636efd7e9b57e76c2b86">  139</a></span><span class="preprocessor">#define OFFSET_RIDERTRQ -(324.11*GAIN_RIDERTRQ) </span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno"><a class="line" href="group__constants.html#gab477643530458d3aa154680682b8ff25">  140</a></span><span class="preprocessor">#define GAIN_STEERPOS   50.9F/180.0F*PI </span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno"><a class="line" href="group__constants.html#gae6d0524be8ca3027d2aecaf0e035b164">  141</a></span><span class="preprocessor">#define OFFSET_STEERPOS -29.7F/180.0F*PI </span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno"><a class="line" href="group__constants.html#ga80746903d4e2b2a10bbcb0b87ba0e7a4">  142</a></span><span class="preprocessor">#define GAIN_STEERVEL   (2.0F*8000.0F/60.0F*2.0F*PI) </span></div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno"><a class="line" href="group__constants.html#ga210b074bb7b10e7b910ac99f84fc390f">  143</a></span><span class="preprocessor">#define OFFSET_STEERVEL (-8000.0F/60.0F*2.0F*PI) </span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno"><a class="line" href="group__constants.html#gabf3f052504d8533b0251e73755e741b2">  144</a></span><span class="preprocessor">#define GAIN_ACTCURR    2*MAX_REFCUR </span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno"><a class="line" href="group__constants.html#ga5479339e5cd312b2d432e81b111c9da5">  145</a></span><span class="preprocessor">#define OFFSET_ACTCURR  -MAX_REFCUR </span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno"><a class="line" href="group__constants.html#gacdd2b306af532dcb678ba88e79b5d9f2">  146</a></span><span class="preprocessor">#define GAIN_VOLTAGE    3.3F*1.027F*160.0F/10.0F </span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno"><a class="line" href="group__constants.html#gaccefc1afeec894f8231db862e3fb8172">  147</a></span><span class="preprocessor">#define OFFSET_VOLTAGE  0.0F </span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno"><a class="line" href="group__constants.html#ga1c6e0ed12f22e4834683b203130d9a0b">  148</a></span><span class="preprocessor">#define GAIN_FORKDISP   -152.935F </span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno"><a class="line" href="group__constants.html#gaba90314ffb6a5ae22fddf18beabf82ed">  149</a></span><span class="preprocessor">#define OFFSET_FORKDISP 0.107F </span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno"><a class="line" href="group__constants.html#ga02a250c43b1b4dd09d96b35ba5d788f1">  150</a></span><span class="preprocessor">#define GYROX_OFFSET    +0.0059F/GYRO_SCALE </span></div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno"><a class="line" href="group__constants.html#ga7a088044bdaccb6910a1277718a4b895">  151</a></span><span class="preprocessor">#define GYROY_OFFSET    -0.0066F/GYRO_SCALE </span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno"><a class="line" href="group__constants.html#ga2676a196647e348b0c882a47a0176868">  152</a></span><span class="preprocessor">#define GYROZ_OFFSET    -0.0080F/GYRO_SCALE </span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span> </div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span><span class="comment">//LIMITS</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno"><a class="line" href="group__constants.html#ga0e54cc12bd9c8f03814eb80cad6d31a7">  155</a></span><span class="preprocessor">#define MAX_REFCUR      controlParams.maxCurrent </span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno"><a class="line" href="group__constants.html#ga1418d6ad5d86af50ca218dc7fdcef881">  156</a></span><span class="preprocessor">#define MAX_REFTHROTTLE 1.0F </span></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno"><a class="line" href="group__constants.html#ga34badbf9acae6cc5c2eed2ab51b32d30">  157</a></span><span class="preprocessor">#define MIN_VOLTAGE     18 </span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno"><a class="line" href="group__constants.html#ga0637861f9419cef73e2e7e6210280e4e">  158</a></span><span class="preprocessor">#define MAX_VOLTAGE     35 </span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span><span class="comment">//TODO define for MAX_STEER_ANGLE, like 0.3 or 0.4</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span><span class="comment">//....................................MACROS....................................</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span> </div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span><span class="comment">//CONVERSIONS</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno"><a class="line" href="group__macros.html#ga28849b92741c91c183ecc67f622745ca">  180</a></span><span class="comment"></span><span class="preprocessor">#define CONVERT_RIDERTRQ_TO_NM(X)       (GAIN_RIDERTRQ * X / (powf(2, ADC_RES) - 1) * 3.3F / 5.0F * 1.0e3 + OFFSET_RIDERTRQ) </span><span class="comment">//macro for conversion of rider torque to Nm</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span> </div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno"><a class="line" href="group__macros.html#ga769b976c4121a7a391256c22ac0b1574">  189</a></span><span class="preprocessor">#define CONVERT_STEERPOS_TO_RAD(X)      (GAIN_STEERPOS * X / (powf(2, ADC_RES) - 1) + OFFSET_STEERPOS) </span><span class="comment">//macro for conversion of steer position to rad</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span> </div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno"><a class="line" href="group__macros.html#gaf848cbd1d7243c93a2b24e291c1bc101">  198</a></span><span class="preprocessor">#define CONVERT_STEERVEL_TO_RADPS(X)    ((GAIN_STEERVEL * X / (powf(2, ADC_RES) - 1) + OFFSET_STEERVEL)/STEERVEL_RATIO) </span><span class="comment">//macro for conversion of steer velocity to rad/s</span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno"><a class="line" href="group__macros.html#gaf67ccefc1da687bdf46d6ce1335bfacb">  207</a></span><span class="preprocessor">#define CONVERT_ACTCURR_TO_A(X)         (GAIN_ACTCURR * X / (powf(2, ADC_RES) - 1) + OFFSET_ACTCURR) </span><span class="comment">//macro for conversion of actual motor current to A</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span> </div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno"><a class="line" href="group__macros.html#ga19200e08a75508620d67d0c3d10c7ee4">  216</a></span><span class="preprocessor">#define CONVERT_CURRENT_TO_PWM(X)       (PWM_MIN * (powf(2, PWM_RES) - 1) + abs((PWM_MAX - PWM_MIN) * X / MAX_REFCUR * (powf(2, PWM_RES) - 1))) </span><span class="comment">// convert the motor current to PWM value</span></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno"><a class="line" href="group__macros.html#gadea2c9eb2ab3208341d72030c5b3fcd6">  225</a></span><span class="preprocessor">#define CONVERT_CURRENT_TO_DAC(X)       abs(X / MAX_REFCUR * (powf(2, DAC_RES) - 1)) </span><span class="comment">//convert the motor current to DAC value</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span> </div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno"><a class="line" href="group__macros.html#gaf62c17a8cb56bb6dc7fe868dd9751d3c">  234</a></span><span class="preprocessor">#define CONVERT_TRHOTTLE_TO_DAC(X)      abs(X / MAX_REFTHROTTLE * (powf(2, DAC_RES) - 1)) </span><span class="comment">//convert the throttle to DAC value</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span> </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno"><a class="line" href="group__macros.html#ga1fd4f8dbf5dd807476adc369963a4ab5">  243</a></span><span class="preprocessor">#define CONVERT_VOLTAGE_TO_V(X)         (GAIN_VOLTAGE * X / (powf(2, ADC_RES) - 1) + OFFSET_VOLTAGE) </span><span class="comment">//macro for conversion of battery voltage to V</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span> </div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno"><a class="line" href="group__macros.html#ga1a96b2fc66a90171031b116d31da7315">  252</a></span><span class="preprocessor">#define CONVERT_FORKDISP_TO_MM(X)       (GAIN_FORKDISP * X / (powf(2, ADC_RES) - 1) + OFFSET_FORKDISP) </span><span class="comment">//macro for conversion of front fork displacement to mm</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span> </div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span><span class="comment">//ENABLES</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno"><a class="line" href="group__macros.html#ga6f33722d82d0c0c925fa286cf9dfd29e">  255</a></span><span class="preprocessor">#define MTR_EN_STATE    HIGH </span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno"><a class="line" href="group__macros.html#ga7522f7e19118b196c8e8c167fcf21e04">  256</a></span><span class="preprocessor">#define RELAY_EN_STATE  HIGH </span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno"><a class="line" href="group__macros.html#ga800de20d77a39e8a2a62555ce28c71a5">  257</a></span><span class="preprocessor">#define MTR_ENABLE      digitalWriteFast(MTR_EN_PIN, MTR_EN_STATE), delay(100) </span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno"><a class="line" href="group__macros.html#gac79e5ea1f6f7d9954561e6ed22fbb168">  258</a></span><span class="preprocessor">#define RELAY_ENABLE    digitalWriteFast(RELAY_EN_PIN, RELAY_EN_STATE), delay(500) </span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno"><a class="line" href="group__macros.html#ga93b988914e9a59230d1ace60329816c0">  259</a></span><span class="preprocessor">#define LEDON           digitalWriteFast(LED_BUILTIN, HIGH) </span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno"><a class="line" href="group__macros.html#gab5af97f90bb65204696431f93005c060">  260</a></span><span class="preprocessor">#define LEDOFF          digitalWriteFast(LED_BUILTIN, LOW) </span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span> </div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span><span class="comment">//POWER MANAGEMENT</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno"><a class="line" href="group__macros.html#gae8131694b06a62416e7b799b129de381">  263</a></span><span class="preprocessor">#define POWER_OFF       SNVS_LPCR |= (1&lt;&lt;6) </span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span> </div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span><span class="comment">//...................................USER PARAMS.................................</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span> </div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno"><a class="line" href="group__userparams.html#gab6b652797b16c31087c6e7fef45cc175">  275</a></span><span class="preprocessor">#define CPU_FREQ            600e6 </span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno"><a class="line" href="group__userparams.html#gaab127c827040328f9b72d0e28500bf4a">  276</a></span><span class="preprocessor">#define MTR_CTRL_MODE       1 </span></div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno"><a class="line" href="group__userparams.html#gabe61b07c31c2a3e90576eb4c5d95b024">  277</a></span><span class="preprocessor">#define CW                  LOW </span></div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno"><a class="line" href="group__userparams.html#gaf1343cba3fa95d5715b27fa9404da2bd">  278</a></span><span class="preprocessor">#define NUM_ZERO_SAMPLES    500 </span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno"><a class="line" href="group__userparams.html#ga8395bd4f9136d83d19f90e0a1790f619">  279</a></span><span class="preprocessor">#define STEERVEL_RATIO      (controlParams.beltRatio*controlParams.gearRatio) </span></div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno"><a class="line" href="group__userparams.html#ga2635709fc71b4c669dce3234d4d378ff">  280</a></span><span class="preprocessor">#define FULLEXT_FORKDISP    0 </span></div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno"><a class="line" href="group__userparams.html#ga1ada7fd1f94ea9dae26b2767bf35d3ee">  281</a></span><span class="preprocessor">#define NAN_VAL             0xFFC00000 </span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno"><a class="line" href="group__userparams.html#gaec13acb5dce7cb97bcff20113fac24b4">  282</a></span><span class="preprocessor">#define YINCL_MCUBOX        1.3426 </span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno"><a class="line" href="group__userparams.html#ga58b13742f4753d2205930a46e8b11398">  283</a></span><span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code hl_variable" href="group__userparams.html#ga58b13742f4753d2205930a46e8b11398">imu_rotMat</a>[3][3] = { {0, cosf(<a class="code hl_define" href="group__userparams.html#gaec13acb5dce7cb97bcff20113fac24b4">YINCL_MCUBOX</a>), sinf(<a class="code hl_define" href="group__userparams.html#gaec13acb5dce7cb97bcff20113fac24b4">YINCL_MCUBOX</a>)}, </div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>                                  {1, 0, 0},  </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>                                  {0, sinf(<a class="code hl_define" href="group__userparams.html#gaec13acb5dce7cb97bcff20113fac24b4">YINCL_MCUBOX</a>), -cosf(<a class="code hl_define" href="group__userparams.html#gaec13acb5dce7cb97bcff20113fac24b4">YINCL_MCUBOX</a>)} }; </div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno"><a class="line" href="group__userparams.html#gaf9442460cbb06c83036b0cfa19d20658">  286</a></span><span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code hl_variable" href="group__userparams.html#gaf9442460cbb06c83036b0cfa19d20658">mag_rotMat</a>[3][3] = { {cosf(<a class="code hl_define" href="group__userparams.html#gaec13acb5dce7cb97bcff20113fac24b4">YINCL_MCUBOX</a>), 0, sinf(<a class="code hl_define" href="group__userparams.html#gaec13acb5dce7cb97bcff20113fac24b4">YINCL_MCUBOX</a>)},</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>                                  {0, -1, 0}, </div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>                                  {sinf(<a class="code hl_define" href="group__userparams.html#gaec13acb5dce7cb97bcff20113fac24b4">YINCL_MCUBOX</a>), 0, -cosf(<a class="code hl_define" href="group__userparams.html#gaec13acb5dce7cb97bcff20113fac24b4">YINCL_MCUBOX</a>)} }; </div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span> </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span><span class="comment">//.......................................EOF.....................................</span></div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span> </div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span><span class="preprocessor">#endif</span></div>
<div class="ttc" id="agroup__userparams_html_ga58b13742f4753d2205930a46e8b11398"><div class="ttname"><a href="group__userparams.html#ga58b13742f4753d2205930a46e8b11398">imu_rotMat</a></div><div class="ttdeci">const float imu_rotMat[3][3]</div><div class="ttdoc">Rotation matrix from IMU frame to SAE body-fixed frame.</div><div class="ttdef"><b>Definition:</b> config.h:283</div></div>
<div class="ttc" id="agroup__userparams_html_gaec13acb5dce7cb97bcff20113fac24b4"><div class="ttname"><a href="group__userparams.html#gaec13acb5dce7cb97bcff20113fac24b4">YINCL_MCUBOX</a></div><div class="ttdeci">#define YINCL_MCUBOX</div><div class="ttdoc">Pitch iinclination of MCU box (in rad).</div><div class="ttdef"><b>Definition:</b> config.h:282</div></div>
<div class="ttc" id="agroup__userparams_html_gaf9442460cbb06c83036b0cfa19d20658"><div class="ttname"><a href="group__userparams.html#gaf9442460cbb06c83036b0cfa19d20658">mag_rotMat</a></div><div class="ttdeci">const float mag_rotMat[3][3]</div><div class="ttdoc">Rotation matrix from MAG frame to SAE body-fixed frame.</div><div class="ttdef"><b>Definition:</b> config.h:286</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="config_8h.html">config.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
